(function(i,u){typeof exports=="object"&&typeof module!="undefined"?u(exports):typeof define=="function"&&define.amd?define(["exports"],u):(i=typeof globalThis!="undefined"?globalThis:i||self,u(i.oni={}))})(this,function(i){"use strict";var u=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function S(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var h={exports:{}};(function(n,F){(function(p,l){n.exports=l()})(u,()=>(()=>{var p={};return(()=>{var l=p;Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(t,g){var c=[],d=new Set,f=x(t),j=function(){return f},y=function(e){if(e.call)return d.add(e),function(){d.delete(e)}},m=function(e,r){return c.push({action:e,payload:r}),new Promise(function(a){return E(function(o){return T({action:e,payload:r},a)})})},w=function(e){y(function(r,a){var o=a.action,v=a.payload;o in e&&e[o].call(null,r,{action:o,payload:v})})},T=function(e,r){var a=e.action,o=e.payload,v=o===void 0?{}:o;c.forEach(function(s){var b=s.action,O=s.payload,P=O===void 0?{}:O;if(b in g){var N=g[b].call(null,f,P,{getState:j,subscribe:y,dispatch:m,patternMatch:w});Object.assign(f,N)}else console.log("[Oni] Error -> No action [ ".concat(b," ] found."))}),c.length&&(d.forEach(function(s){return s(f,{action:a,payload:v})}),c=[]),r(f)};return{getState:j,subscribe:y,dispatch:m,patternMatch:w,destroy:function(){return d.clear()}}};var x=function(t){return JSON.parse(JSON.stringify(t))},E=typeof window=="undefined"?function(t){return t()}:function(t){return requestAnimationFrame(t)}})(),p})())})(h);var M=h.exports;const _=S(M);i.default=_,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
